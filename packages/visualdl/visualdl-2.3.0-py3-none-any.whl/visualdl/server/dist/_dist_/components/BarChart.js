import*as w from"../utils/chart.js";import s,{useEffect as C,useImperativeHandle as z}from"../../__snowpack__/pkg/react.js";import{primaryColor as I}from"../utils/style.js";import L,{Wrapper as R,useChartTheme as D}from"../hooks/useECharts.js";import G from"../../__snowpack__/pkg/react-spinners/GridLoader.js";import f from"../../__snowpack__/pkg/lodash/defaultsDeep.js";const H=s.forwardRef(({options:o,categories:a,direction:c,data:t,title:e,loading:u,className:h,onInit:_},d)=>{const{ref:g,echart:r,wrapper:x,saveAsImage:y}=L({loading:!!u,autoFit:!0,onInit:_}),l=D();return z(d,()=>({saveAsImage:()=>{y(e)}})),C(()=>{const{color:m,colorAlt:N,series:k,...v}=w,p=c==="horizontal",n={type:"value"},i={type:"category",data:a,axisLabel:{formatter:null}},A=f({title:{text:e!=null?e:""},xAxis:p?n:i,yAxis:p?i:n,series:t==null?void 0:t.map((E,j)=>f(E,{itemStyle:{color:m[j%m.length]}},k))},o,l,v);r==null||r.setOption(A,{notMerge:!0})},[o,t,e,l,r,c,a]),s.createElement(R,{ref:x,className:h},!r&&s.createElement("div",{className:"loading"},s.createElement(G,{color:I,size:"10px"})),s.createElement("div",{className:"echarts",ref:g}))});export default H;
