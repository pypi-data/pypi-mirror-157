import*as L from"../utils/chart.js";import a,{useEffect as E,useImperativeHandle as b}from"../../__snowpack__/pkg/react.js";import{primaryColor as C}from"../utils/style.js";import N,{Wrapper as S,useChartTheme as T}from"../hooks/useECharts.js";import I from"../../__snowpack__/pkg/react-spinners/GridLoader.js";import i from"../../__snowpack__/pkg/lodash/defaultsDeep.js";import{formatTime as c}from"../utils/index.js";import{useTranslation as R}from"../../__snowpack__/pkg/react-i18next.js";export var XAxisType;(function(r){r.value="value",r.log="log",r.time="time"})(XAxisType||(XAxisType={}));export var YAxisType;(function(r){r.value="value",r.log="log"})(YAxisType||(YAxisType={}));const D=a.forwardRef(({options:r,data:l,title:t,loading:g,zoom:x,className:_,onInit:d},h)=>{const{i18n:n}=R(),{ref:v,echart:s,wrapper:y,saveAsImage:k}=N({loading:!!g,zoom:x,autoFit:!0,onInit:d}),m=T();return b(h,()=>({restore:()=>{s==null||s.dispatchAction({type:"restore"})},saveAsImage:()=>{k(t)}})),E(()=>{const{color:p,colorAlt:G,series:w,...A}=L;let e=i({title:{text:t!=null?t:""},xAxis:{splitLine:{show:!1},splitNumber:5},yAxis:{splitNumber:4},series:l==null?void 0:l.map((o,j)=>{var f,u;return i({showSymbol:((u=(f=o==null?void 0:o.data)==null?void 0:f.length)!=null?u:0)<=1,type:"line"},o,{lineStyle:{color:p[j%p.length],width:1.5}},w)})},r,m,A);(e==null?void 0:e.xAxis).type==="time"&&(e=i({xAxis:{axisLabel:{formatter:o=>c(o,n.language,"LTS")}}},e)),(e==null?void 0:e.yAxis).type==="time"&&(e=i({yAxis:{axisLabel:{formatter:o=>c(o,n.language,"LTS")}}},e)),s==null||s.setOption(e,{notMerge:!0})},[r,l,t,m,n.language,s]),a.createElement(S,{ref:y,className:_},!s&&a.createElement("div",{className:"loading"},a.createElement(I,{color:C,size:"10px"})),a.createElement("div",{className:"echarts",ref:v}))});export default D;
