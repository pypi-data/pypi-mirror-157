{"version":3,"file":"334229ce.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIA;AAoEA;;AApEA;;ACuBA;;AAGA;AACA;AACA;;AAEA;AAGA;;AAEA;;;AAGA;;AAGA;AACA;;;;AAIA;;;AAGA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA7CA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC4FA;;;;AC4FA;;;;;AAKA;AACA;AACA;AACA;;;;;AAKA;AACA;;;;;;AAjKA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuQA","sources":["webpack://insteon-panel-frontend/./homeassistant-frontend/src/components/ha-card.ts","webpack://insteon-panel-frontend/./homeassistant-frontend/src/layouts/hass-subpage.ts","webpack://insteon-panel-frontend/./homeassistant-frontend/src/layouts/ha-app-layout.js","webpack://insteon-panel-frontend/./src/insteon-devices-panel.ts"],"sourcesContent":["import { css, CSSResultGroup, html, LitElement, TemplateResult } from \"lit\";\nimport { customElement, property } from \"lit/decorators\";\n\n@customElement(\"ha-card\")\nexport class HaCard extends LitElement {\n  @property() public header?: string;\n\n  @property({ type: Boolean, reflect: true }) public outlined = false;\n\n  static get styles(): CSSResultGroup {\n    return css`\n      :host {\n        background: var(\n          --ha-card-background,\n          var(--card-background-color, white)\n        );\n        border-radius: var(--ha-card-border-radius, 4px);\n        box-shadow: var(\n          --ha-card-box-shadow,\n          0px 2px 1px -1px rgba(0, 0, 0, 0.2),\n          0px 1px 1px 0px rgba(0, 0, 0, 0.14),\n          0px 1px 3px 0px rgba(0, 0, 0, 0.12)\n        );\n        color: var(--primary-text-color);\n        display: block;\n        transition: all 0.3s ease-out;\n        position: relative;\n      }\n\n      :host([outlined]) {\n        box-shadow: none;\n        border-width: var(--ha-card-border-width, 1px);\n        border-style: solid;\n        border-color: var(\n          --ha-card-border-color,\n          var(--divider-color, #e0e0e0)\n        );\n      }\n\n      .card-header,\n      :host ::slotted(.card-header) {\n        color: var(--ha-card-header-color, --primary-text-color);\n        font-family: var(--ha-card-header-font-family, inherit);\n        font-size: var(--ha-card-header-font-size, 24px);\n        letter-spacing: -0.012em;\n        line-height: 48px;\n        padding: 12px 16px 16px;\n        display: block;\n        margin-block-start: 0px;\n        margin-block-end: 0px;\n        font-weight: normal;\n      }\n\n      :host ::slotted(.card-content:not(:first-child)),\n      slot:not(:first-child)::slotted(.card-content) {\n        padding-top: 0px;\n        margin-top: -8px;\n      }\n\n      :host ::slotted(.card-content) {\n        padding: 16px;\n      }\n\n      :host ::slotted(.card-actions) {\n        border-top: 1px solid var(--divider-color, #e8e8e8);\n        padding: 5px 16px;\n      }\n    `;\n  }\n\n  protected render(): TemplateResult {\n    return html`\n      ${this.header\n        ? html`<h1 class=\"card-header\">${this.header}</h1>`\n        : html``}\n      <slot></slot>\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-card\": HaCard;\n  }\n}\n","import { css, CSSResultGroup, html, LitElement, TemplateResult } from \"lit\";\nimport { customElement, eventOptions, property } from \"lit/decorators\";\nimport { restoreScroll } from \"../common/decorators/restore-scroll\";\nimport \"../components/ha-icon-button-arrow-prev\";\nimport \"../components/ha-menu-button\";\nimport { HomeAssistant } from \"../types\";\n\n@customElement(\"hass-subpage\")\nclass HassSubpage extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property() public header?: string;\n\n  @property({ type: Boolean, attribute: \"main-page\" }) public mainPage = false;\n\n  @property({ type: String, attribute: \"back-path\" }) public backPath?: string;\n\n  @property({ type: Boolean, reflect: true }) public narrow = false;\n\n  @property({ type: Boolean }) public supervisor = false;\n\n  // @ts-ignore\n  @restoreScroll(\".content\") private _savedScrollPos?: number;\n\n  protected render(): TemplateResult {\n    return html`\n      <div class=\"toolbar\">\n        ${this.mainPage || history.state?.root\n          ? html`\n              <ha-menu-button\n                .hassio=${this.supervisor}\n                .hass=${this.hass}\n                .narrow=${this.narrow}\n              ></ha-menu-button>\n            `\n          : this.backPath\n          ? html`\n              <a href=${this.backPath}>\n                <ha-icon-button-arrow-prev\n                  .hass=${this.hass}\n                ></ha-icon-button-arrow-prev>\n              </a>\n            `\n          : html`\n              <ha-icon-button-arrow-prev\n                .hass=${this.hass}\n                @click=${this._backTapped}\n              ></ha-icon-button-arrow-prev>\n            `}\n\n        <div class=\"main-title\">${this.header}</div>\n        <slot name=\"toolbar-icon\"></slot>\n      </div>\n      <div class=\"content\" @scroll=${this._saveScrollPos}><slot></slot></div>\n    `;\n  }\n\n  @eventOptions({ passive: true })\n  private _saveScrollPos(e: Event) {\n    this._savedScrollPos = (e.target as HTMLDivElement).scrollTop;\n  }\n\n  private _backTapped(): void {\n    history.back();\n  }\n\n  static get styles(): CSSResultGroup {\n    return css`\n      :host {\n        display: block;\n        height: 100%;\n        background-color: var(--primary-background-color);\n      }\n\n      :host([narrow]) {\n        width: 100%;\n        position: fixed;\n      }\n\n      .toolbar {\n        display: flex;\n        align-items: center;\n        font-size: 20px;\n        height: var(--header-height);\n        padding: 0 16px;\n        pointer-events: none;\n        background-color: var(--app-header-background-color);\n        font-weight: 400;\n        color: var(--app-header-text-color, white);\n        border-bottom: var(--app-header-border-bottom, none);\n        box-sizing: border-box;\n      }\n      .toolbar a {\n        color: var(--sidebar-text-color);\n        text-decoration: none;\n      }\n\n      ha-menu-button,\n      ha-icon-button-arrow-prev,\n      ::slotted([slot=\"toolbar-icon\"]) {\n        pointer-events: auto;\n        color: var(--sidebar-icon-color);\n      }\n\n      .main-title {\n        margin: 0 0 0 24px;\n        line-height: 20px;\n        flex-grow: 1;\n      }\n\n      .content {\n        position: relative;\n        width: 100%;\n        height: calc(100% - 1px - var(--header-height));\n        overflow-y: auto;\n        overflow: auto;\n        -webkit-overflow-scrolling: touch;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hass-subpage\": HassSubpage;\n  }\n}\n","/* eslint-plugin-disable lit */\n/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n/*\nThis code is copied from app-header-layout.\n'fullbleed' support is removed as Home Assisstant doesn't use it.\ntransform: translate(0) is added.\n*/\n/*\n  FIXME(polymer-modulizer): the above comments were extracted\n  from HTML and may be out of place here. Review them and\n  then delete this comment!\n*/\nimport \"@polymer/app-layout/app-header-layout/app-header-layout\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport \"@polymer/polymer/polymer-element\";\n\nclass HaAppLayout extends customElements.get(\"app-header-layout\") {\n  static get template() {\n    return html`\n      <style>\n        :host {\n          display: block;\n          /**\n         * Force app-header-layout to have its own stacking context so that its parent can\n         * control the stacking of it relative to other elements (e.g. app-drawer-layout).\n         * This could be done using \\`isolation: isolate\\`, but that's not well supported\n         * across browsers.\n         */\n          position: relative;\n          z-index: 0;\n        }\n\n        #wrapper ::slotted([slot=\"header\"]) {\n          @apply --layout-fixed-top;\n          z-index: 1;\n        }\n\n        #wrapper.initializing ::slotted([slot=\"header\"]) {\n          position: relative;\n        }\n\n        :host([has-scrolling-region]) {\n          height: 100%;\n        }\n\n        :host([has-scrolling-region]) #wrapper ::slotted([slot=\"header\"]) {\n          position: absolute;\n        }\n\n        :host([has-scrolling-region])\n          #wrapper.initializing\n          ::slotted([slot=\"header\"]) {\n          position: relative;\n        }\n\n        :host([has-scrolling-region]) #wrapper #contentContainer {\n          @apply --layout-fit;\n          overflow-y: auto;\n          -webkit-overflow-scrolling: touch;\n        }\n\n        :host([has-scrolling-region]) #wrapper.initializing #contentContainer {\n          position: relative;\n        }\n\n        #contentContainer {\n          /* Create a stacking context here so that all children appear below the header. */\n          position: relative;\n          z-index: 0;\n          /* Using 'transform' will cause 'position: fixed' elements to behave like\n           'position: absolute' relative to this element. */\n          transform: translate(0);\n          margin-left: env(safe-area-inset-left);\n          margin-right: env(safe-area-inset-right);\n        }\n\n        @media print {\n          :host([has-scrolling-region]) #wrapper #contentContainer {\n            overflow-y: visible;\n          }\n        }\n      </style>\n\n      <div id=\"wrapper\" class=\"initializing\">\n        <slot id=\"headerSlot\" name=\"header\"></slot>\n\n        <div id=\"contentContainer\"><slot></slot></div>\n        <slot id=\"fab\" name=\"fab\"></slot>\n      </div>\n    `;\n  }\n}\ncustomElements.define(\"ha-app-layout\", HaAppLayout);\n","import \"@polymer/app-layout/app-header/app-header\";\nimport \"@polymer/app-layout/app-toolbar/app-toolbar\";\nimport \"@material/mwc-list/mwc-list-item\";\nimport \"@material/mwc-button\";\nimport \"@material/mwc-fab\";\nimport { mdiPlus, mdiDotsVertical } from \"@mdi/js\";\nimport { UnsubscribeFunc } from \"home-assistant-js-websocket\";\nimport { css, CSSResultGroup, html, LitElement, TemplateResult } from \"lit\";\nimport { customElement, property } from \"lit/decorators\";\nimport memoizeOne from \"memoize-one\";\nimport \"../homeassistant-frontend/src/components/data-table/ha-data-table\";\nimport {\n  DataTableRowData,\n  RowClickedEvent,\n} from \"../homeassistant-frontend/src/components/data-table/ha-data-table\";\nimport \"../homeassistant-frontend/src/components/ha-card\";\nimport \"../homeassistant-frontend/src/components/ha-button-menu\";\nimport \"../homeassistant-frontend/src/layouts/hass-subpage\";\nimport \"../homeassistant-frontend/src/layouts/ha-app-layout\";\nimport { haStyle } from \"../homeassistant-frontend/src/resources/styles\";\nimport { HomeAssistant, Route } from \"../homeassistant-frontend/src/types\";\nimport {\n  subscribeDeviceRegistry,\n  DeviceRegistryEntry,\n} from \"../homeassistant-frontend/src/data/device_registry\";\nimport { Insteon } from \"./data/insteon\";\nimport { navigate } from \"../homeassistant-frontend/src/common/navigate\";\nimport { HASSDomEvent } from \"../homeassistant-frontend/src/common/dom/fire_event\";\nimport {\n  AreaRegistryEntry,\n  subscribeAreaRegistry,\n} from \"../homeassistant-frontend/src/data/area_registry\";\nimport { showInsteonAddDeviceDialog } from \"./device/show-dialog-insteon-add-device\";\nimport { showInsteonAddingDeviceDialog } from \"./device/show-dialog-adding-device\";\n\ninterface DeviceRowData extends DataTableRowData {\n  id: string;\n  name: string;\n  address: string;\n  description: string;\n  model: string;\n  area: string;\n}\n\n@customElement(\"insteon-devices-panel\")\nexport class InsteonDevicesPanel extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property({ type: Object }) public insteon!: Insteon;\n\n  @property({ type: Object }) public route!: Route;\n\n  @property({ type: Boolean }) public narrow = false;\n\n  @property({ type: Array }) private _devices: DeviceRegistryEntry[] = [];\n\n  private _areas: AreaRegistryEntry[] = [];\n\n  private _unsubs?: UnsubscribeFunc[];\n\n  public firstUpdated(changedProperties) {\n    super.firstUpdated(changedProperties);\n\n    if (!this.hass || !this.insteon) {\n      return;\n    }\n    if (!this._unsubs) {\n      this._getDevices();\n    }\n  }\n\n  public updated(changedProperties) {\n    super.updated(changedProperties);\n\n    if (!this.hass || !this.insteon) {\n      return;\n    }\n    if (!this._unsubs) {\n      this._getDevices();\n    }\n  }\n\n  public disconnectedCallback() {\n    super.disconnectedCallback();\n    if (this._unsubs) {\n      while (this._unsubs.length) {\n        this._unsubs.pop()!();\n      }\n      this._unsubs = undefined;\n    }\n  }\n\n  private _getDevices() {\n    if (!this.insteon || !this.hass) {\n      return;\n    }\n\n    this._unsubs = [\n      subscribeAreaRegistry(this.hass.connection, (areas) => {\n        this._areas = areas;\n      }),\n      subscribeDeviceRegistry(this.hass.connection, (entries) => {\n        this._devices = entries.filter(\n          (device) =>\n            device.config_entries && device.config_entries.includes(this.insteon.config_entry.entry_id)\n        );\n      }),\n    ];\n  }\n\n  private _columns = memoizeOne((narrow: boolean) =>\n    narrow\n      ? {\n          name: {\n            title: \"Device\",\n            sortable: true,\n            filterable: true,\n            direction: \"asc\",\n            grows: true,\n          },\n          address: {\n            title: \"Address\",\n            sortable: true,\n            filterable: true,\n            direction: \"asc\",\n            width: \"5hv\",\n          },\n        }\n      : {\n          name: {\n            title: \"Device\",\n            sortable: true,\n            filterable: true,\n            direction: \"asc\",\n            grows: true,\n          },\n          address: {\n            title: \"Address\",\n            sortable: true,\n            filterable: true,\n            direction: \"asc\",\n            width: \"20%\",\n          },\n          description: {\n            title: \"Description\",\n            sortable: true,\n            filterable: true,\n            direction: \"asc\",\n            width: \"15%\",\n          },\n          model: {\n            title: \"Model\",\n            sortable: true,\n            filterable: true,\n            direction: \"asc\",\n            width: \"15%\",\n          },\n          area: {\n            title: \"Area\",\n            sortable: true,\n            filterable: true,\n            direction: \"asc\",\n            width: \"15%\",\n          },\n        }\n  );\n\n  private _insteonDevices = memoizeOne((devices: DeviceRegistryEntry[]) => {\n    const areaLookup: { [areaId: string]: AreaRegistryEntry } = {};\n    for (const area of this._areas) {\n      areaLookup[area.area_id] = area;\n    }\n\n    const insteonDevices: DeviceRowData[] = devices.map((device) => {\n      const deviceRowdata: DeviceRowData = {\n        id: device.id,\n        name: device.name_by_user || device.name || \"No device name\",\n        address: device.name?.substring(device.name.length - 8) || \"\",\n        description: device.name?.substring(0, device.name.length - 8) || \"\",\n        model: device.model || \"\",\n        area: device.area_id ? areaLookup[device.area_id].name : \"\",\n      };\n      return deviceRowdata;\n    });\n    return insteonDevices;\n  });\n\n  protected render(): TemplateResult | void {\n    return html`\n      <ha-app-layout>\n        <app-header fixed slot=\"header\">\n          <app-toolbar>\n            <ha-menu-button .hass=${this.hass} .narrow=${this.narrow}></ha-menu-button>\n            <div main-title>Insteon Configuration</div>\n          </app-toolbar>\n        </app-header>\n        <ha-data-table\n          .hass=${this.hass}\n          .data=${this._insteonDevices(this._devices)}\n          .columns=${this._columns(this.narrow)}\n          @row-click=${this._handleRowClicked}\n        ></ha-data-table>\n        <div id=\"fab\">\n          <mwc-fab\n            slot=\"fab\"\n            title=\"${this.insteon.localize(\"aldb.actions.create\")}\"\n            @click=${this._addDevice}\n          >\n            <ha-svg-icon slot=\"icon\" path=${mdiPlus}></ha-svg-icon>\n          </mwc-fab>\n        </div>\n      </ha-app-layout>\n    `;\n  }\n\n  private async _addDevice(): Promise<void> {\n    showInsteonAddDeviceDialog(this, {\n      hass: this.hass,\n      insteon: this.insteon,\n      title: this.insteon.localize(\"device.actions.add\"),\n      callback: async (address, multiple) => this._handleDeviceAdd(address, multiple),\n    });\n  }\n\n  private async _handleDeviceAdd(address: string, multiple: boolean) {\n    showInsteonAddingDeviceDialog(this, {\n      hass: this.hass,\n      insteon: this.insteon,\n      multiple: multiple,\n      address: address,\n      title: \"Adding Insteon Device\",\n    });\n  }\n\n  private async _handleRowClicked(ev: HASSDomEvent<RowClickedEvent>): Promise<void> {\n    // eslint-disable-next-line no-console\n    // console.info(\"Row clicked received\");\n    const id = ev.detail.id;\n    navigate(\"/insteon/device/properties/\" + id);\n  }\n\n  static get styles(): CSSResultGroup {\n    return [\n      css`\n        ha-data-table {\n          width: 100%;\n          height: 100%;\n          --data-table-border-width: 0;\n        }\n        :host(:not([narrow])) ha-data-table {\n          height: calc(100vh - 1px - var(--header-height));\n          display: block;\n        }\n        :host([narrow]) hass-tabs-subpage {\n          --main-title-margin: 0;\n        }\n        .table-header {\n          display: flex;\n          align-items: center;\n          --mdc-shape-small: 0;\n          height: 56px;\n        }\n        .search-toolbar {\n          display: flex;\n          align-items: center;\n          color: var(--secondary-text-color);\n        }\n        search-input {\n          --mdc-text-field-fill-color: var(--sidebar-background-color);\n          --mdc-text-field-idle-line-color: var(--divider-color);\n          --text-field-overflow: visible;\n          z-index: 5;\n        }\n        .table-header search-input {\n          display: block;\n          position: absolute;\n          top: 0;\n          right: 0;\n          left: 0;\n        }\n        .search-toolbar search-input {\n          display: block;\n          width: 100%;\n          color: var(--secondary-text-color);\n          --mdc-ripple-color: transparant;\n        }\n        #fab {\n          position: fixed;\n          right: calc(16px + env(safe-area-inset-right));\n          bottom: calc(16px + env(safe-area-inset-bottom));\n          z-index: 1;\n        }\n        :host([narrow]) #fab.tabs {\n          bottom: calc(84px + env(safe-area-inset-bottom));\n        }\n        #fab[is-wide] {\n          bottom: 24px;\n          right: 24px;\n        }\n        :host([rtl]) #fab {\n          right: auto;\n          left: calc(16px + env(safe-area-inset-left));\n        }\n        :host([rtl][is-wide]) #fab {\n          bottom: 24px;\n          left: 24px;\n          right: auto;\n        }\n      `,\n      haStyle,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"insteon-devices-panel\": InsteonDevicesPanel;\n  }\n}\n"],"names":[],"sourceRoot":""}