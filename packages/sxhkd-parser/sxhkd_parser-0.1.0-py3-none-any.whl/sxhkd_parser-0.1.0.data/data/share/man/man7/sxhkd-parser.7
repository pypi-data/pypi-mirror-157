.\" Generated by scdoc 1.11.1
.\" Complete documentation for this program is not available as a GNU info page
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.nh
.ad l
.\" Begin generated content:
.TH "sxhkd-parser" "7" "2022-07-03"
.P
.SH NAME
.P
sxhkd-parser - parser library for \fBsxhkd\fR(1) configs
.P
.SH DESCRIPTION
.P
\fBsxhkd-parser\fR is a \fBpython\fR(1) library for parsing \fBsxhkd\fR(1) configs.\&
This is an overview of some important background information needed when
using any of the tools using this library.\&  The manpage for \fBhkdebug\fR(1)
goes into further detail with regard to the internals of the library.\&
.P
.SH TERMINOLOGY
.P
.RS 4
.ie n \{\
\h'-04'1.\h'+03'\c
.\}
.el \{\
.IP 1. 4
.\}
Hotkey: The sequence of chords needed to activate a command.\&
.RE
.RS 4
.ie n \{\
\h'-04'2.\h'+03'\c
.\}
.el \{\
.IP 2. 4
.\}
Command: The command passed to the shell after the hotkey is completed.\&
.RE
.RS 4
.ie n \{\
\h'-04'3.\h'+03'\c
.\}
.el \{\
.IP 3. 4
.\}
Keybind: The entity that encompasses the above.\&

.RE
.P
.SH SECTIONS AND METADATA
.P
The \fBsxhkd-parser\fR library allows sections and metadata to be parsed
from comments in the config.\&  This relies on passing regular expressions
to certain options.\&  The list of required options is determined by
the section or metadata type (\fB--section-type\fR and \fB--metadata-type\fR,
respectively).\&  These regular expressions may be required to contain
certain Python-style named groups (i.\&e.\&, "\fB(?\&P<name>REGEX)\fR") so that
relevant information can be extracted.\&
.P
Sections are recognised greedily: whenever a comment matches the given
regex, a new section is defined.\&
.P
Metadata is parsed from the contiguous block of comments immediately
preceding a keybind (if any).\&  If a comment in this block defines a
section, that comment and any comments above it are excluded from the
block parsed for metadata.\&
.P
.SS SECTION TYPES
.P
Sections may be \fBsimple\fR in which there are no subsections, or represent
a \fBstack\fR in which there \fIare\fR subsections, which require that they
are completely enclosed by their parent sections.\&
.P
There may also be \fIno\fR sections below the root ("\fBnone\fR"), in which no
comments create new sections.\&  Consequently, all keybinds are direct
children of the root section.\&
.P
.SS METADATA TYPES
.P
With regard to metadata, there may only be descriptions on single
lines ("simple") or they may be key-value pairs across multiple lines
("key-value").\&
.P
There may also be \fIno\fR metadata for keybinds ("\fBnone\fR").\&
.P
.SH BUGS
.P
To maintain simplicity in the implementation, some uncommon features of
sxhkd are unsupported:
.P
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.IP \(bu 4
.\}
Inconsistent location of "\fB:\fR" to indicate noabort across the permutations of
a hotkey: it's best to keep "\fB:\fR" outside of any sequences.\&
.RE
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.IP \(bu 4
.\}
Alphanumeric ranges within sequences of the form \fB{s1,s2,s3,.\&.\&.\&,sn}\fR:
.RS 4
.RE
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.IP \(bu 4
.\}
These are OK:
.RS 4
.RE
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.IP \(bu 4
.\}
Alphabetic: \fBA-Z\fR, \fBa-z\fR, \fBA-F\fR, \fBa-f\fR, \fBA-z\fR (within ASCII)
.RE
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.IP \(bu 4
.\}
Numeric: \fB0-9\fR, \fB5-8\fR
.RE
.RE
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.IP \(bu 4
.\}
These are \fInot\fR: \fB0-A\fR, \fBA-0\fR
.RE
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.IP \(bu 4
.\}
I'm open to changing this if there's a good justification for it.\&
.RE
.RE
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.IP \(bu 4
.\}
Command cycling:
  - The library enforces the invariant that, within each keybind, the number
    of permutations of the hotkey and the command are equal.\&
  - It's undocumented and thus unlikely to be used that much anyway.\&

.RE
.P
Also, using \fB@\fR or \fB~\fR at the start of the hotkey instead of just before
the keysym (as documented in the manpage of \fBsxhkd\fR(1)) is unsupported.\&
Use the documented syntax.\&
.P
.SH SEE ALSO
.P
\fBsxhkd\fR(1), \fBpython\fR(1), \fBhkdebug\fR(1)
