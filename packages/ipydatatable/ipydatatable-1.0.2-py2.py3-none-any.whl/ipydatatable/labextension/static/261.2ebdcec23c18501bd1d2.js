(self.webpackChunkipydatatable=self.webpackChunkipydatatable||[]).push([[261],{1568:(e,t,l)=>{e.exports=l(8051),e.exports.version=l(306).version},8051:(e,t,l)=>{try{window.$.fn.modal;var d=!1}catch{d=!0}console.log("Are we in JupyterLabssss: "+d);var o=l(1337);window.$=window.jQuery=l(6646),l(6299),window.pdfMake=l(1566);var a=l(7920);window.pdfMake.vfs=a.pdfMake.vfs,l(8725),l(1734),l(9661),l(4328),l(2481),l(6155),l(5924),l(130),l(7740),l(5253),l(7480);var n=l(8435),c=l(5431);d&&l(4588),l(6642),l(4211),l(5680),l(8752);var r=o.DOMWidgetModel.extend({defaults:c.extend(o.DOMWidgetModel.prototype.defaults(),{_model_name:"InteractiveTableModel",_view_name:"InteractiveTableView",_model_module:"ipydatatable",_view_module:"ipydatatable",_model_module_version:"1.0.2",_view_module_version:"1.0.2"})}),i=o.DOMWidgetView.extend({render:function(){var e=this;e.column_order=[],e.create_style_jinteractive();var t=e.model.get("table");e.selected_data=[],e.model.on("change:selected_index_row",this.selected_index_row_changed,this),e.model.on("change:selected_group",this.selected_group_changed,this),e.onclickRowSelection=!1,e.groupClick=!1,e.wrapper=document.createElement("div"),e.wrapper.id="wrapper_"+e.cid,e.wrapper.style.display="none",e.wrapper.style.width="100%",e.wrapper.style.setProperty("color","black","important"),e.wrapper.style.backgroundColor="white",e.tbl=document.createElement("table"),e.tbl.style.width="100%",e.tbl.style.setProperty("color","black","important"),e.tbl.style.wordWrap="break-word",e.tbl.id="example_"+e.cid,e.tbl.className="display",e.cols=[],e.dropdown=!1,e.columns=[""];var l=document.createElement("tbody");$.each(t,((t,d)=>{e.dropdown=!1;var o=document.createElement("tr");if(Object.keys(d).forEach((function(t){var l=document.createElement("td");if("string"==typeof d[t]||d[t]instanceof String)var a=d[t];else a=null==d[t]?"":d[t].toString();"group"==t?e.dropdown=!0:a.length>e.model.get("text_limit")?(e.dropdown=!0,e.cols.push("over_length"),l.appendChild(document.createTextNode(a))):l.appendChild(document.createTextNode(a)),e.cols.includes(t)||"group"==t||e.cols.push(t),"group"!=t&&o.appendChild(l)})),e.dropdown)(a=document.createElement("td")).appendChild(document.createTextNode("+")),a.className="show_details",$(o).prepend(a);else{var a=document.createElement("td");$(o).prepend(a)}l.appendChild(o)}));var o=document.createElement("thead"),a=document.createElement("tr"),c=!1;if($.each(e.cols,((t,l)=>{var d=document.createElement("th");"group"!=l&&"over_length"!=l?(e.columns.push(l),c=!0,d.appendChild(document.createTextNode(l)),a.appendChild(d)):(c=!0,d.orderable=!1)})),c){var r=document.createElement("td");$(a).prepend(r)}o.appendChild(a),e.tbl.appendChild(o),e.tbl.appendChild(l),e.wrapper.appendChild(e.tbl),e.el.appendChild(this.wrapper),$(document).ready((function(){var l=function(){return $(window).height()-200};$(window).on("resize",(function(){screen.width===window.innerWidth?($("#example_"+e.cid+"_wrapper .dataTables_scrollBody").css("height",l()+"px").css("max-height",l()+"px"),console.log("1")):(console.log($("#example_"+e.cid+"_wrapper .dataTables_scrollBody")),$("#example_"+e.cid+"_wrapper .dataTables_scrollBody").css("height","400px").css("max-height","400px"),console.log("2"))})),$("#example_"+e.cid+" tbody").on("click","td.show_details",(function(){var t=e.table.columns().header().toArray().map((e=>e.innerText));"-"==e.table.cell(this).data()?e.table.cell(this).data("+"):e.table.cell(this).data("-");var l=$(this).closest("tr"),o=e.table.row(l);o.child.isShown()?(o.child.hide(),l.removeClass("shown")):(o.child(function(l,d){let o=e.model.get("child_group_select");var a=document.createElement("table");if(a.style.paddingLeft="50px",a.style.borderSpacing="0",o){var n=document.createElement("div");n.classList.add("btn-group"),n.classList.add("btn-group-toggle"),n.setAttribute("data-toggle","buttons")}$.each(l,((l,d)=>{if(d.length>e.model.get("text_limit")){let e=document.createElement("tr"),o=document.createElement("td"),n=document.createElement("td");o.appendChild(document.createTextNode(t[l])),n.appendChild(document.createTextNode(d)),e.appendChild(o),e.appendChild(n),a.appendChild(e)}}));var c=e.model.get("table")[d];if(c.hasOwnProperty("group")&&$.each(c.group,((t,l)=>{if(o){let o=document.createElement("label");o.style.marginRight="10px";let a=document.createElement("input");a.setAttribute("type","checkbox"),a.setAttribute("name","options"),a.setAttribute("autocomplete","off"),a.setAttribute("id","group_"+e.cid+"_"+d);let c=[...e.model.get("selected_group")];$.each(c,(function(e,o){o==d+":"+t+":"+l&&(a.checked=!0)})),a.onclick=function(){let o=[...e.model.get("selected_group")];e.groupClick=!0,o.indexOf(d+":"+t+":"+l)<0?(o.push(d+":"+t+":"+l),e.model.set("selected_group",o),e.touch()):(o.splice(o.indexOf(d+":"+t+":"+l),1),e.model.set("selected_group",o),e.touch())},o.appendChild(a),o.appendChild(document.createTextNode(" "+l)),n.appendChild(o)}else{let e=document.createElement("tr"),d=document.createElement("td"),o=document.createElement("td");d.appendChild(document.createTextNode(t)),o.appendChild(document.createTextNode(l)),e.appendChild(d),e.appendChild(o),a.appendChild(e)}})),o){let e=document.createElement("div");return e.appendChild(a),e.appendChild(n),e}return a}(o.data(),o.index())).show(),l.addClass("shown")),d||$(".group-buttons").click((function(){$(this).toggleClass("active")}))})),e.selected=[...e.model.get("selected_index_row")],$("#example_"+e.cid+" tbody").on("click","tr",(function(){console.log(e.table);var l=[];e.selected.includes(e.table.row(this).index())?e.selected.splice(e.selected.indexOf(e.table.row(this).index()),1):e.selected.push(e.table.row(this).index()),$.each(e.selected,((e,d)=>{l.push(t[d])})),e.onclickRowSelection=!0,e.touch(),e.model.set("selected_data",l),e.model.set("selected_index_row",[...e.selected]),e.touch()})),e.model.get("column_filter")&&(e.column_order.push(0),$("#example_"+e.cid+" thead tr").clone(!0).appendTo("#example_"+e.cid+" thead"),$("#example_"+e.cid+" thead tr:eq(1) th").each((function(t){var l=$(this).text();e.column_order.push(t+1),$(this).html('<input type="text" placeholder="Search '+l+'" />'),$("input",this).on("keyup change clear",(function(){e.table.column(e.column_order.indexOf(t+1)).search()!==this.value&&e.table.column(e.column_order.indexOf(t+1)).search(this.value).draw()}))})));var o=e.columns.indexOf(e.model.get("sort_column"))>-1?e.columns.indexOf(e.model.get("sort_column")):1,a=[];$.each(e.columns,((t,l)=>{""!=l&&("hide"==e.model.get("init_state")?e.model.get("columns").includes(l)&&a.push(t):e.model.get("columns").includes(l)||a.push(t))})),e.table=$("#example_"+e.cid).DataTable({dom:"Blfrtip",buttons:[{text:"Full Screen",action:function(t,l,d,o){n.isEnabled&&n.request($("#wrapper_"+e.cid)[0])}},{extend:"selectAll",action:function(t,l,d,o){var a=[];e.selected=[],l.rows().every((function(t,l,d){var o=this.data();e.selected.push(t),a.push(o)})),e.model.set("selected_data",a),e.model.set("selected_index_row",[...e.selected]),e.touch(),window.$.fn.dataTable.ext.buttons.selectAll.action.call(this,t,l,d,o)}},{extend:"selectNone",action:function(t,l,d,o){window.$.fn.dataTable.ext.buttons.selectNone.action.call(this,t,l,d,o),e.selected=[],e.model.set("selected_data",[]),e.model.set("selected_index_row",[]),e.touch()}},{extend:"colvis",columns:":not(.notToggleVis)"},"searchBuilder","copy","csv","excel","pdf","print"],orderCellsTop:!0,order:[[o,"desc"]],lengthMenu:[[10,25,50,100,500,-1],[10,25,50,100,500,"All"]],fixedHeader:!0,scrollY:400,scrollResize:!0,scrollCollapse:!0,scrollX:!0,select:{style:"multi"},colReorder:!0,columnDefs:[{width:10,targets:0,orderable:!1,className:"notToggleVis"},{targets:a,visible:!1},{targets:"_all",render:function(t,l,d){return t.length>e.model.get("text_limit")?t.substr(0,e.model.get("text_limit"))+"â€¦":t}}]}),$("#example_"+e.cid+" td").css("white-space","initial"),$("#example_"+e.cid+" td").css("word-break","break-word");let c=[];$.each(e.model.get("selected_index_row"),((t,l)=>{c.push(e.model.get("table")[l]),e.table.row(l).select()})),e.model.set("selected_data",c),e.touch(),e.table.on("column-reorder",(function(t,l,d){d.mapping;var o=[];$.each(l.aoColumns,((e,t)=>{o.push(t._ColReorder_iOrigCol)})),e.column_order=o})),e.wrapper.style.display="block",d&&(e.wrapper.style.width=document.getElementById("wrapper_"+e.cid).parentNode.parentNode.parentNode.parentElement.clientWidth-100+"px",e.wrapper.style.setProperty("color","black","important")),e.table.columns.adjust()}))},selected_group_changed:function(){let e=this,t=(e.model.get("selected_group"),$("#example_"+e.cid).DataTable());e.groupClick||(t.rows().every((function(e,l,d){let o=this.data();console.log("Data: ",o),"-"==o[0]&&(o[0]="+",this.data(o)),this.invalidate();let a=t.row(this).child;a.isShown()&&a.hide()})),t.rows(".selected").nodes().to$().removeClass("selected"),t.draw(),e.touch())},selected_index_row_changed:function(){let e=this;console.log(e.model.get("selected_index_row"));let t=$("#example_"+e.cid).DataTable(),l=[];e.onclickRowSelection?e.onclickRowSelection=!1:(console.log(t),t.rows(".selected").nodes().to$().removeClass("selected"),$.each(e.model.get("selected_index_row"),((d,o)=>{l.push(e.model.get("table")[o]),t.row(o).select()})),e.model.set("selected_data",l),e.touch()),e.groupClick=!1},create_style_jinteractive:function(){if(d)var e="Font Awesome 5 Free";else e="fontawesome";var t=`\n      div.dataTables_scrollHead table.dataTable thead th.sorting_asc::after,\n      div.dataTables_scrollHead table.dataTable thead th.sorting_desc::after {\n        content:"" !important;\n      }\n      div.dataTables_scrollHead table.dataTable thead .sorting:after {\n        content: "\\f0dc";\n        float: left;\n        font-family: '${e}';\n        padding-right:5px;\n      }\n      div.dataTables_scrollHead table.dataTable thead th.sorting_asc:after {\n        font-family: '${e}';\n        float: left;\n        content: "\\f0de" !important;\n        padding-right:5px;\n      }\n      div.dataTables_scrollHead table.dataTable thead th.sorting_desc:after {\n        font-family: '${e}';\n        float: left;\n        content: "\\f0dd" !important;\n        padding-right:5px;\n      }\n      div.dt-button-collection {\n        max-height: 200px !important;\n        overflow-y: auto !important;\n      }\n      `;this.style_context=document.createElement("style"),this.style_context.innerHTML=t,this.el.appendChild(this.style_context)}});e.exports={InteractiveTableModel:r,InteractiveTableView:i}},6261:(e,t,l)=>{var d=l(1568),o=l(1337);e.exports={id:"ipydatatable:plugin",requires:[o.IJupyterWidgetRegistry],activate:function(e,t){t.registerWidget({name:"ipydatatable",version:d.version,exports:d})},autoStart:!0}},306:e=>{"use strict";e.exports={version:"1.0.2"}}}]);